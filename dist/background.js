(()=>{console.log("Spoiler Blocker background script started");chrome.runtime.onInstalled.addListener((function(e){console.log("Spoiler Blocker extension installed or updated:",e.reason),chrome.storage.local.get(["useApiDetection","useKeywordDetection"],(function(e){var o={};"boolean"!=typeof e.useApiDetection&&(o.useApiDetection=true),"boolean"!=typeof e.useKeywordDetection&&(o.useKeywordDetection=true),Object.keys(o).length>0&&chrome.storage.local.set(o,(function(){console.log("Initialized default settings:",o)}))}))})),chrome.runtime.onMessage.addListener((function(e,o,t){if(console.log("Background received message:",e.action),"getKeywords"===e.action)return chrome.storage.local.get("keywords",(function(e){var o=e.keywords||[];console.log("Sending keywords to content script:",o),t({keywords:o})})),!0})),console.log("Spoiler Blocker background script initialized")})();